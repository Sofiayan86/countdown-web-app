<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡è¦æ—¥å­å€’æ•¸</title>
    
    <!-- React å’Œç›¸é—œåº« -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PWA è¨­å®š -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="é‡è¦æ—¥å­å€’æ•¸">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        button { min-height: 44px; }
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        #loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(to bottom right, #f8fafc, #e0e7ff, #c7d2fe);
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root">
        <div id="loading">
            <div style="text-align: center;">
                <div style="width: 50px; height: 50px; border: 4px solid #e5e7eb; border-top: 4px solid #3b82f6; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <p style="margin-top: 20px; color: #6b7280;">è¼‰å…¥ä¸­...</p>
            </div>
        </div>
    </div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { 
            Plus, Heart, Star, Gift, Trash2, Clock, Pin, Upload, X, RotateCcw, 
            BarChart3, Camera, TrendingUp, List, Download, Share2, MessageCircle, 
            Send, Copy, ExternalLink 
        } = lucideReact;

        const CountdownWebApp = () => {
            const fileInputRef = useRef(null);
            
            const [events, setEvents] = useState([
                {
                    id: 1,
                    name: 'æ–°å¹´',
                    date: '2026-01-01',
                    type: 'holiday',
                    color: 'from-red-500 to-red-600',
                    isPinned: true,
                    customImage: 'https://images.unsplash.com/photo-1467810563316-b5476525c0f9?w=600&h=300&fit=crop'
                },
                {
                    id: 2,
                    name: 'æˆ‘çš„ç”Ÿæ—¥',
                    date: '2025-08-15',
                    type: 'birthday',
                    color: 'from-pink-500 to-pink-600',
                    isPinned: true,
                    customImage: 'https://images.unsplash.com/photo-1464349095431-e9a21285b5f3?w=600&h=300&fit=crop'
                }
            ]);
            
            const [showAddForm, setShowAddForm] = useState(false);
            const [showWidget, setShowWidget] = useState(false);
            const [dateFormat, setDateFormat] = useState('days');
            const [currentView, setCurrentView] = useState('events');
            const [showInstallPrompt, setShowInstallPrompt] = useState(false);
            const [deferredPrompt, setDeferredPrompt] = useState(null);
            const [showShareModal, setShowShareModal] = useState(false);
            const [shareEvent, setShareEvent] = useState(null);
            const [newEvent, setNewEvent] = useState({
                name: '',
                date: '',
                type: 'other',
                customImage: null
            });

            useEffect(() => {
                const handleBeforeInstallPrompt = (e) => {
                    e.preventDefault();
                    setDeferredPrompt(e);
                    setShowInstallPrompt(true);
                };

                window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);

                return () => {
                    window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
                };
            }, []);

            const handleInstallApp = async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`ç”¨æˆ¶é¸æ“‡: ${outcome}`);
                    setDeferredPrompt(null);
                    setShowInstallPrompt(false);
                }
            };

            const eventTypes = {
                birthday: { icon: Gift, label: 'ç”Ÿæ—¥', color: 'from-pink-500 to-pink-600' },
                holiday: { icon: Star, label: 'ç¯€æ—¥', color: 'from-red-500 to-red-600' },
                anniversary: { icon: Heart, label: 'ç´€å¿µæ—¥', color: 'from-purple-500 to-purple-600' },
                other: { icon: List, label: 'å…¶ä»–', color: 'from-blue-500 to-blue-600' }
            };

            const calculateTimeLeft = (targetDate) => {
                const now = new Date().getTime();
                const target = new Date(targetDate).getTime();
                const difference = target - now;

                if (difference <= 0) {
                    const pastDays = Math.floor(Math.abs(difference) / (1000 * 60 * 60 * 24));
                    const pastYears = Math.floor(pastDays / 365);
                    const pastMonths = Math.floor((pastDays % 365) / 30);
                    const pastRemainingDays = pastDays % 30;
                    
                    return { 
                        days: 0, 
                        isPast: true,
                        pastDays: pastDays,
                        pastYears: pastYears,
                        pastMonths: pastMonths,
                        pastRemainingDays: pastRemainingDays
                    };
                }

                const futureDays = Math.floor(difference / (1000 * 60 * 60 * 24));
                const futureYears = Math.floor(futureDays / 365);
                const futureMonths = Math.floor((futureDays % 365) / 30);
                const futureRemainingDays = futureDays % 30;

                return {
                    days: futureDays,
                    isPast: false,
                    pastDays: 0,
                    years: futureYears,
                    months: futureMonths,
                    remainingDays: futureRemainingDays
                };
            };

            const formatDetailedTime = (timeLeft) => {
                if (timeLeft.isPast) {
                    const { pastYears, pastMonths, pastRemainingDays } = timeLeft;
                    let parts = [];
                    if (pastYears > 0) parts.push(`${pastYears}å¹´`);
                    if (pastMonths > 0) parts.push(`${pastMonths}å€‹æœˆ`);
                    if (pastRemainingDays > 0 || parts.length === 0) parts.push(`${pastRemainingDays}å¤©`);
                    return parts.join(' ');
                } else {
                    const { years, months, remainingDays } = timeLeft;
                    let parts = [];
                    if (years > 0) parts.push(`${years}å¹´`);
                    if (months > 0) parts.push(`${months}å€‹æœˆ`);
                    if (remainingDays > 0 || parts.length === 0) parts.push(`${remainingDays}å¤©`);
                    return parts.join(' ');
                }
            };

            const formatDate = (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString('zh-TW', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });
            };

            const [timeLefts, setTimeLefts] = useState({});

            useEffect(() => {
                const timer = setInterval(() => {
                    const newTimeLefts = {};
                    events.forEach(event => {
                        newTimeLefts[event.id] = calculateTimeLeft(event.date);
                    });
                    setTimeLefts(newTimeLefts);
                }, 60000);

                const initialTimeLefts = {};
                events.forEach(event => {
                    initialTimeLefts[event.id] = calculateTimeLeft(event.date);
                });
                setTimeLefts(initialTimeLefts);

                return () => clearInterval(timer);
            }, [events]);

            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        setNewEvent({...newEvent, customImage: e.target.result});
                    };
                    reader.readAsDataURL(file);
                }
            };

            const removeCustomImage = (eventId = null) => {
                if (eventId) {
                    setEvents(events.map(event => 
                        event.id === eventId ? {...event, customImage: null} : event
                    ));
                } else {
                    setNewEvent({...newEvent, customImage: null});
                }
            };

            const addEvent = () => {
                if (newEvent.name && newEvent.date) {
                    const event = {
                        id: Date.now(),
                        ...newEvent,
                        color: eventTypes[newEvent.type].color,
                        isPinned: false
                    };
                    setEvents([...events, event]);
                    setNewEvent({ name: '', date: '', type: 'other', customImage: null });
                    setShowAddForm(false);
                }
            };

            const deleteEvent = (id) => {
                setEvents(events.filter(event => event.id !== id));
            };

            const togglePin = (id) => {
                const pinnedCount = events.filter(event => event.isPinned).length;
                const eventToToggle = events.find(event => event.id === id);
                
                if (!eventToToggle.isPinned && pinnedCount >= 3) {
                    alert('æœ€å¤šåªèƒ½é‡˜é¸ 3 å€‹äº‹ä»¶ï¼');
                    return;
                }

                setEvents(events.map(event =>
                    event.id === id ? { ...event, isPinned: !event.isPinned } : event
                ));
            };

            const pinnedEvents = events.filter(event => event.isPinned).slice(0, 3);

            const getStatistics = () => {
                const now = new Date();
                const futureEvents = events.filter(event => new Date(event.date) > now);
                const pastEvents = events.filter(event => new Date(event.date) <= now);
                
                const typeStats = Object.keys(eventTypes).reduce((acc, type) => {
                    acc[type] = events.filter(event => event.type === type).length;
                    return acc;
                }, {});

                return {
                    total: events.length,
                    future: futureEvents.length,
                    past: pastEvents.length,
                    typeStats,
                    futureEvents: futureEvents.sort((a, b) => new Date(a.date) - new Date(b.date)),
                    pastEvents: pastEvents.sort((a, b) => new Date(b.date) - new Date(a.date))
                };
            };

            const stats = getStatistics();

            const exportData = () => {
                const dataStr = JSON.stringify(events, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `countdown-events-${new Date().toISOString().slice(0,10)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            };

            const importData = (event) => {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const importedEvents = JSON.parse(e.target.result);
                            setEvents(importedEvents);
                            alert('æ•¸æ“šå°å…¥æˆåŠŸï¼');
                        } catch (error) {
                            alert('å°å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥æ–‡ä»¶æ ¼å¼ï¼');
                        }
                    };
                    reader.readAsText(file);
                }
            };

            const shareAppToSocial = (platform) => {
                const appTitle = 'é‡è¦æ—¥å­å€’æ•¸ Web App';
                const appDescription = 'ä¸€å€‹ç°¡æ½”å„ªé›…çš„å€’æ•¸è¨ˆæ™‚æ‡‰ç”¨ï¼Œå¹«ä½ è¨˜éŒ„ç”Ÿå‘½ä¸­çš„é‡è¦æ™‚åˆ» â°âœ¨';
                const baseUrl = window.location.href;
                const fullText = `${appDescription}\n\nğŸ”— ${baseUrl}\n\n#å€’æ•¸è¨ˆæ™‚ #é‡è¦æ—¥å­ #æ™‚é–“ç®¡ç† #ç”Ÿæ´»è¨˜éŒ„`;
                
                const instagramText = `${appDescription} ğŸ‰\n\n#å€’æ•¸è¨ˆæ™‚ #é‡è¦æ—¥å­ #æ™‚é–“ç®¡ç† #ç”Ÿæ´»è¨˜éŒ„ #WebApp`;
                
                let shareUrl = '';
                
                switch (platform) {
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(fullText)}`;
                        break;
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(baseUrl)}&quote=${encodeURIComponent(appDescription)}`;
                        break;
                    case 'line':
                        shareUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(baseUrl)}&text=${encodeURIComponent(appDescription)}`;
                        break;
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=${encodeURIComponent(fullText)}`;
                        break;
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(baseUrl)}&text=${encodeURIComponent(appDescription)}`;
                        break;
                    case 'instagram':
                        navigator.clipboard.writeText(instagramText);
                        alert('Instagram åˆ†äº«æ–‡å­—å·²è¤‡è£½ï¼\n\nè«‹é–‹å•Ÿ Instagram Appï¼Œè²¼ä¸Šæ–‡å­—ä¸¦æ·»åŠ æ‚¨çš„æˆªåœ–æˆ–ç›¸é—œåœ–ç‰‡ã€‚\n\nå»ºè­°æ­é…æ‡‰ç”¨æˆªåœ–æ•ˆæœæ›´ä½³ï¼');
                        return;
                    case 'copy':
                        navigator.clipboard.writeText(fullText);
                        alert('æ‡‰ç”¨åˆ†äº«å…§å®¹å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
                        return;
                    case 'native':
                        if (navigator.share) {
                            navigator.share({
                                title: appTitle,
                                text: appDescription,
                                url: baseUrl,
                            }).catch(error => console.log('åˆ†äº«å¤±æ•—:', error));
                        } else {
                            navigator.clipboard.writeText(baseUrl);
                            alert('éˆæ¥å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
                        }
                        return;
                    default:
                        return;
                }
                
                if (shareUrl) {
                    window.open(shareUrl, '_blank', 'width=600,height=400');
                }
            };

            const shareEventToSocial = (event, platform) => {
                const timeLeft = timeLefts[event.id] || calculateTimeLeft(event.date);
                const eventIcon = eventTypes[event.type].label;
                
                let shareText = '';
                let shareUrl = '';
                
                if (timeLeft.isPast) {
                    shareText = `ğŸ•’ ${event.name} å·²ç¶“éå» ${timeLeft.pastDays} å¤©äº†ï¼é€™æ˜¯ä¸€å€‹ç‰¹åˆ¥çš„${eventIcon}ç´€å¿µæ—¥ âœ¨`;
                } else {
                    shareText = `â° è·é›¢ ${event.name} é‚„æœ‰ ${timeLeft.days} å¤©ï¼æœŸå¾…é€™å€‹ç‰¹åˆ¥çš„${eventIcon} ğŸ‰`;
                }
                
                const baseUrl = window.location.href;
                const fullText = `${shareText}\n\nğŸ“… ${formatDate(event.date)}\n\nç”¨é‡è¦æ—¥å­å€’æ•¸ App è¨˜éŒ„ä½ çš„ç‰¹åˆ¥æ™‚åˆ»ï¼š${baseUrl}`;
                
                const instagramText = timeLeft.isPast 
                    ? `${event.name} å·²ç¶“éå» ${timeLeft.pastDays} å¤©äº†ï¼âœ¨ #é‡è¦æ—¥å­ #ç´€å¿µæ—¥ #${eventIcon}`
                    : `è·é›¢ ${event.name} é‚„æœ‰ ${timeLeft.days} å¤©ï¼ğŸ‰ #å€’æ•¸è¨ˆæ™‚ #é‡è¦æ—¥å­ #${eventIcon}`;
                
                switch (platform) {
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(fullText)}`;
                        break;
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(baseUrl)}&quote=${encodeURIComponent(shareText)}`;
                        break;
                    case 'line':
                        shareUrl = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(baseUrl)}&text=${encodeURIComponent(shareText)}`;
                        break;
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=${encodeURIComponent(fullText)}`;
                        break;
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(baseUrl)}&text=${encodeURIComponent(shareText)}`;
                        break;
                    case 'instagram':
                        navigator.clipboard.writeText(instagramText);
                        alert('Instagram åˆ†äº«æ–‡å­—å·²è¤‡è£½ï¼\n\nè«‹é–‹å•Ÿ Instagram Appï¼Œè²¼ä¸Šæ–‡å­—ä¸¦æ·»åŠ æ‚¨çš„ç…§ç‰‡æˆ–é™å‹•èƒŒæ™¯ã€‚\n\nå»ºè­°æ­é…äº‹ä»¶ç›¸é—œç…§ç‰‡æ•ˆæœæ›´ä½³ï¼');
                        return;
                    case 'copy':
                        navigator.clipboard.writeText(fullText);
                        alert('åˆ†äº«å…§å®¹å·²è¤‡è£½åˆ°å‰ªè²¼æ¿ï¼');
                        return;
                    default:
                        return;
                }
                
                if (shareUrl) {
                    window.open(shareUrl, '_blank', 'width=600,height=400');
                }
            };

            const openShareModal = (event) => {
                setShareEvent(event);
                setShowShareModal(true);
            };

            const closeShareModal = () => {
                setShowShareModal(false);
                setShareEvent(null);
            };

            // ç°¡åŒ–ç‰ˆçš„ React.createElement ç”¨æ³•
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100" },
                // å®‰è£æç¤º
                showInstallPrompt && React.createElement('div', { className: "fixed top-0 left-0 right-0 bg-blue-600 text-white p-4 z-50 flex items-center justify-between" },
                    React.createElement('div', { className: "flex items-center gap-3" },
                        React.createElement(Download, { size: 20 }),
                        React.createElement('span', { className: "text-sm font-medium" }, "å®‰è£é€™å€‹ App åˆ°ä½ çš„è¨­å‚™ä¸Šï¼Œç²å¾—æ›´å¥½çš„é«”é©—ï¼")
                    ),
                    React.createElement('div', { className: "flex gap-2" },
                        React.createElement('button', {
                            onClick: handleInstallApp,
                            className: "px-4 py-2 bg-white text-blue-600 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors"
                        }, "å®‰è£"),
                        React.createElement('button', {
                            onClick: () => setShowInstallPrompt(false),
                            className: "px-4 py-2 bg-blue-700 rounded-lg text-sm font-medium hover:bg-blue-800 transition-colors"
                        }, "ç¨å¾Œ")
                    )
                ),
                
                // ä¸»è¦å…§å®¹
                React.createElement('div', { className: "flex" },
                    React.createElement('div', { className: "flex-1 p-6 max-w-6xl mx-auto" },
                        // æ¨™é¡Œå€åŸŸ
                        React.createElement('div', { className: "text-center mb-12" },
                            React.createElement('div', { className: "inline-flex items-center gap-4 mb-6" },
                                React.createElement('div', { className: "p-4 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl shadow-lg" },
                                    React.createElement(Clock, { className: "text-white", size: 32 })
                                ),
                                React.createElement('h1', { className: "text-5xl font-black text-gray-800 tracking-tight" }, "é‡è¦æ—¥å­å€’æ•¸")
                            ),
                            React.createElement('p', { className: "text-xl text-gray-600 mb-8" }, "è¨˜éŒ„ä¸¦å€’æ•¸ä½ ç”Ÿå‘½ä¸­çš„é‡è¦æ™‚åˆ»"),
                            
                            // æœƒè©±æœŸé–“ä¿å­˜æç¤º
                            React.createElement('div', { className: "mb-4 px-4 py-2 bg-yellow-100 border-l-4 border-yellow-500 rounded-lg" },
                                React.createElement('p', { className: "text-sm text-yellow-700" },
                                    React.createElement('strong', {}, "æç¤ºï¼š"),
                                    " æ•¸æ“šåœ¨ç•¶å‰æœƒè©±ä¸­ä¿å­˜ï¼Œåˆ·æ–°é é¢å¾Œæœƒé‡ç½®ç‚ºé»˜èªç‹€æ…‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å°å‡ºåŠŸèƒ½ä¿å­˜æ•¸æ“šã€‚"
                                )
                            ),
                            
                            // å°èˆªå’ŒæŒ‰éˆ•
                            React.createElement('div', { className: "flex items-center justify-between gap-4 mb-8" },
                                React.createElement('div', { className: "flex items-center justify-center gap-2" },
                                    React.createElement('button', {
                                        onClick: () => setCurrentView('events'),
                                        className: `flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${currentView === 'events' ? 'bg-blue-500 text-white shadow-lg' : 'bg-white/80 text-gray-600 hover:bg-white hover:text-blue-600'}`
                                    },
                                        React.createElement(List, { size: 18 }),
                                        React.createElement('span', { className: "hidden sm:inline" }, "äº‹ä»¶åˆ—è¡¨")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => setCurrentView('stats'),
                                        className: `flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 ${currentView === 'stats' ? 'bg-blue-500 text-white shadow-lg' : 'bg-white/80 text-gray-600 hover:bg-white hover:text-blue-600'}`
                                    },
                                        React.createElement(BarChart3, { size: 18 }),
                                        React.createElement('span', { className: "hidden sm:inline" }, "çµ±è¨ˆåˆ†æ")
                                    )
                                ),
                                React.createElement('div', { className: "flex items-center gap-2" },
                                    React.createElement('button', {
                                        onClick: () => setShowShareModal(true),
                                        className: "p-2 bg-white/80 hover:bg-white text-gray-600 hover:text-blue-600 rounded-lg transition-all duration-200",
                                        title: "åˆ†äº«æ‡‰ç”¨"
                                    }, React.createElement(Share2, { size: 18 })),
                                    React.createElement('button', {
                                        onClick: exportData,
                                        className: "p-2 bg-white/80 hover:bg-white text-gray-600 hover:text-green-600 rounded-lg transition-all duration-200",
                                        title: "å°å‡ºæ•¸æ“š"
                                    }, React.createElement(Download, { size: 18 })),
                                    React.createElement('label', {
                                        className: "p-2 bg-white/80 hover:bg-white text-gray-600 hover:text-purple-600 rounded-lg transition-all duration-200 cursor-pointer",
                                        title: "å°å…¥æ•¸æ“š"
                                    },
                                        React.createElement(Upload, { size: 18 }),
                                        React.createElement('input', {
                                            type: "file",
                                            accept: ".json",
                                            onChange: importData,
                                            className: "hidden"
                                        })
                                    )
                                )
                            )
                        ),
                        
                        // é¡¯ç¤ºæ·»åŠ æŒ‰éˆ•å’Œäº‹ä»¶åˆ—è¡¨ï¼ˆç°¡åŒ–ç‰ˆï¼Œåªé¡¯ç¤ºåŸºæœ¬åŠŸèƒ½ï¼‰
                        currentView === 'events' && React.createElement('div', {},
                            React.createElement('div', { className: "mb-12 text-center" },
                                React.createElement('button', {
                                    onClick: () => setShowAddForm(!showAddForm),
                                    className: "group inline-flex items-center gap-3 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-8 py-4 rounded-2xl font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1"
                                },
                                    React.createElement(Plus, { size: 24, className: "group-hover:rotate-90 transition-transform duration-300" }),
                                    "æ·»åŠ æ–°äº‹ä»¶"
                                )
                            ),
                            
                            // äº‹ä»¶åˆ—è¡¨
                            React.createElement('div', { className: "max-w-4xl mx-auto space-y-4" },
                                events.length === 0 ? 
                                    React.createElement('div', { className: "text-center py-16" },
                                        React.createElement('div', { className: "inline-block p-8 bg-white/80 backdrop-blur-lg rounded-3xl shadow-xl" },
                                            React.createElement(List, { size: 80, className: "mx-auto text-gray-300 mb-6" }),
                                            React.createElement('p', { className: "text-2xl font-bold text-gray-500 mb-2" }, "é‚„æ²’æœ‰ä»»ä½•äº‹ä»¶"),
                                            React.createElement('p', { className: "text-gray-400" }, "é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹è¨˜éŒ„é‡è¦æ—¥å­")
                                        )
                                    ) :
                                    events.map(event => {
                                        const timeLeft = timeLefts[event.id] || calculateTimeLeft(event.date);
                                        const EventIcon = eventTypes[event.type].icon;
                                        
                                        return React.createElement('div', {
                                            key: event.id,
                                            className: "group flex items-center gap-4 p-4 bg-white rounded-2xl shadow-md hover:shadow-lg transition-all duration-300 border-l-4"
                                        },
                                            React.createElement('div', { className: "flex-shrink-0" },
                                                React.createElement('div', {
                                                    className: `w-16 h-16 bg-gradient-to-br ${event.color} rounded-xl flex items-center justify-center`
                                                }, React.createElement(EventIcon, { size: 24, className: "text-white" }))
                                            ),
                                            React.createElement('div', { className: "flex-1 min-w-0" },
                                                React.createElement('h3', { className: "text-lg font-bold text-gray-800 truncate" }, event.name),
                                                React.createElement('p', { className: "text-sm text-gray-500" }, formatDate(event.date))
                                            ),
                                            React.createElement('div', { className: "flex-shrink-0 text-right" },
                                                React.createElement('div', {
                                                    className: `text-3xl font-bold ${timeLeft.isPast ? 'text-gray-400' : 'text-blue-600'}`
                                                }, `${timeLeft.isPast ? timeLeft.pastDays : timeLeft.days} å¤©`)
                                            )
                                        );
                                    })
                            )
                        ),
                        
                        // çµ±è¨ˆè¦–åœ–ï¼ˆç°¡åŒ–ç‰ˆï¼‰
                        currentView === 'stats' && React.createElement('div', { className: "max-w-6xl mx-auto" },
                            React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-4 gap-6" },
                                React.createElement('div', { className: "bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-2xl text-white" },
                                    React.createElement('div', { className: "flex items-center gap-3 mb-2" },
                                        React.createElement(List, { size: 24 }),
                                        React.createElement('span', { className: "text-sm font-medium" }, "ç¸½äº‹ä»¶æ•¸")
                                    ),
                                    React.createElement('div', { className: "text-3xl font-bold" }, stats.total)
                                ),
                                React.createElement('div', { className: "bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-2xl text-white" },
                                    React.createElement('div', { className: "flex items-center gap-3 mb-2" },
                                        React.createElement(TrendingUp, { size: 24 }),
                                        React.createElement('span', { className: "text-sm font-medium" }, "æœªä¾†äº‹ä»¶")
                                    ),
                                    React.createElement('div', { className: "text-3xl font-bold" }, stats.future)
                                ),
                                React.createElement('div', { className: "bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-2xl text-white" },
                                    React.createElement('div', { className: "flex items-center gap-3 mb-2" },
                                        React.createElement(Camera, { size: 24 }),
                                        React.createElement('span', { className: "text-sm font-medium" }, "å·²éäº‹ä»¶")
                                    ),
                                    React.createElement('div', { className: "text-3xl font-bold" }, stats.past)
                                ),
                                React.createElement('div', { className: "bg-gradient-to-br from-yellow-500 to-yellow-600 p-6 rounded-2xl text-white" },
                                    React.createElement('div', { className: "flex items-center gap-3 mb-2" },
                                        React.createElement(Pin, { size: 24 }),
                                        React.createElement('span', { className: "text-sm font-medium" }, "é‡˜é¸äº‹ä»¶")
                                    ),
                                    React.createElement('div', { className: "text-3xl font-bold" }, pinnedEvents.length)
                                )
                            )
                        )
                    )
                ),
                
                // åˆ†äº«æ¨¡æ…‹æ¡†
                showShareModal && React.createElement('div', { className: "fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-3xl max-w-md w-full overflow-hidden shadow-2xl transform transition-all" },
                        React.createElement('div', { className: "bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white" },
                            React.createElement('div', { className: "flex items-center justify-between" },
                                React.createElement('h3', { className: "text-xl font-bold flex items-center gap-2" },
                                    React.createElement(Share2, { size: 24 }),
                                    shareEvent ? 'åˆ†äº«äº‹ä»¶' : 'åˆ†äº«æ‡‰ç”¨'
                                ),
                                React.createElement('button', {
                                    onClick: closeShareModal,
                                    className: "text-white/80 hover:text-white p-2 hover:bg-white/20 rounded-lg transition-colors"
                                }, React.createElement(X, { size: 20 }))
                            )
                        ),
                        React.createElement('div', { className: "p-6" },
                            // æ‡‰ç”¨é è¦½
                            !shareEvent && React.createElement('div', { className: "mb-6 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-200" },
                                React.createElement('div', { className: "flex items-center gap-3 mb-3" },
                                    React.createElement('div', { className: "p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl" },
                                        React.createElement(Clock, { size: 20, className: "text-white" })
                                    ),
                                    React.createElement('div', {},
                                        React.createElement('h4', { className: "font-bold text-gray-800" }, "é‡è¦æ—¥å­å€’æ•¸ Web App"),
                                        React.createElement('p', { className: "text-sm text-gray-600" }, "è¨˜éŒ„ç”Ÿå‘½ä¸­çš„é‡è¦æ™‚åˆ»")
                                    )
                                ),
                                React.createElement('div', { className: "text-center" },
                                    React.createElement('div', { className: "text-lg font-semibold text-blue-600" }, "â° å„ªé›…çš„å€’æ•¸è¨ˆæ™‚é«”é©— âœ¨"),
                                    React.createElement('div', { className: "text-sm text-gray-500 mt-1" }, "åˆ†äº«é€™å€‹å¯¦ç”¨çš„ Web App çµ¦æœ‹å‹å€‘ï¼")
                                )
                            ),
                            
                            // åˆ†äº«å¹³å°
                            React.createElement('div', { className: "space-y-3" },
                                React.createElement('h4', { className: "font-semibold text-gray-700 mb-4" }, "é¸æ“‡åˆ†äº«å¹³å°"),
                                React.createElement('div', { className: "grid grid-cols-2 gap-3" },
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'instagram') : shareAppToSocial('instagram'),
                                        className: "flex items-center gap-3 p-3 bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 text-purple-600 rounded-xl transition-all duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center" },
                                            React.createElement(Camera, { size: 16, className: "text-white" })
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "Instagram")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'twitter') : shareAppToSocial('twitter'),
                                        className: "flex items-center gap-3 p-3 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-xl transition-colors duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center" },
                                            React.createElement('span', { className: "text-white font-bold text-sm" }, "ğ•")
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "Twitter")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'facebook') : shareAppToSocial('facebook'),
                                        className: "flex items-center gap-3 p-3 bg-blue-50 hover:bg-blue-100 text-blue-800 rounded-xl transition-colors duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center" },
                                            React.createElement('span', { className: "text-white font-bold text-sm" }, "f")
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "Facebook")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'line') : shareAppToSocial('line'),
                                        className: "flex items-center gap-3 p-3 bg-green-50 hover:bg-green-100 text-green-600 rounded-xl transition-colors duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center" },
                                            React.createElement(MessageCircle, { size: 16, className: "text-white" })
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "LINE")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'whatsapp') : shareAppToSocial('whatsapp'),
                                        className: "flex items-center gap-3 p-3 bg-green-50 hover:bg-green-100 text-green-700 rounded-xl transition-colors duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center" },
                                            React.createElement(MessageCircle, { size: 16, className: "text-white" })
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "WhatsApp")
                                    ),
                                    React.createElement('button', {
                                        onClick: () => shareEvent ? shareEventToSocial(shareEvent, 'copy') : shareAppToSocial('copy'),
                                        className: "flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded-xl transition-colors duration-200"
                                    },
                                        React.createElement('div', { className: "w-8 h-8 bg-gray-500 rounded-lg flex items-center justify-center" },
                                            React.createElement(Copy, { size: 16, className: "text-white" })
                                        ),
                                        React.createElement('span', { className: "font-medium" }, "è¤‡è£½æ–‡å­—")
                                    )
                                )
                            ),
                            
                            React.createElement('div', { className: "mt-6 pt-4 border-t border-gray-200" },
                                React.createElement('button', {
                                    onClick: closeShareModal,
                                    className: "w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-xl font-medium transition-colors duration-200"
                                }, "å–æ¶ˆ")
                            )
                        )
                    )
                ),
                
                // åº•éƒ¨ç‰ˆæœ¬è³‡è¨Š
                React.createElement('div', { className: "fixed bottom-4 left-4 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-lg border border-white/20 text-xs text-gray-600" },
                    "ğŸ“± Web App v1.0 | æœƒè©±æœŸé–“ä¿å­˜"
                )
            );
        };

        ReactDOM.render(React.createElement(CountdownWebApp), document.getElementById('root'));
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>
</body>
</html>
